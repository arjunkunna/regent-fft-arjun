name: Regent-FFT Tests
run-name: ${{ github.actor }} is testing Regent-FFT
on: 
  push:
  workflow_dispatch:

jobs:
  regent-FFT-tests:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: ['ubuntu-22.04'] # 'macos-11' # FIXME: macOS is broken: https://github.com/StanfordLegion/legion/issues/213
        debug: ['1', '0']
    steps:
      - uses: actions/checkout@v1
      - run: ./test.sh
      - run: |
          CUDA_PATH=$(dirname "$(dirname "$(command -v nvcc)")")
          echo "CUDA is installed in: $CUDA_PATH"
      - run: |
          find . -name "cufftXt.h" -print 
      - run: |
          apt-get update && apt-get install tree -y
          tree ./
      
        
        env:
          DEBUG: ${{ matrix.debug }}
          USE_REGENT: '1'
          INSTALL_DEPS: '1'
          SUDO_COMMAND: sudo
